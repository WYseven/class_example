<!DOCTYPE html>
<html lang="zh-cn">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title></title>
		<style>
			
		</style>
		<script src="./jquery-2.2.4.js"></script>
		<script src="underscore.js"></script>
		<script src="./backbone.js"></script>
	</head>

	<body>
		<div class="demo">
		</div>
		<script type="text/template" id="temp">
			<input value="<%=data%>" />
			<p><%=data%></p>
		</script>
		<script>
			var data = "abc";

			//Model
			var m = Backbone.Model.extend({
				defaults:{
					data:data
				},
				initialize:function (){
					console.log(123);
					this.on("change",function (){
						console.log("change");	
					})		
				}
			});

			//new m();
//
			 var Contacts = Backbone.Collection.extend({ 
			 	model: function (){
			 		return new m();		
			 	}
			 	
			 });

			var c = new Contacts();

			  var ContactItemView = Backbone.View.extend({ 
			  		el:$(".demo"),
			  		template: _.template($('#temp').html()), 
			  		render: function(data) { 
				        this.$el.html(this.template({data:this.model.get("data")}));
				        return this;  
				    },
				    events:{
				    	"input input":"inputChange"
				    },
				    model: c.model(),
				    initialize:function (){
				    	_.bindAll(this, 'inputChange');

				    	this.render();

				    	this.listenTo(this.model,"change")
				    	
				    },
				    inputChange:function (ev){
				    	this.model.set("data",ev.target.value);
				    	this.$el.find("p").text(ev.target.value)
				    }
			  });

			  new ContactItemView();


		</script>
	</body>
</html>