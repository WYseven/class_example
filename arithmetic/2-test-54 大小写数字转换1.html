<!DOCTYPE html>
<html>
<head>
	<title>test</title>
<meta charset="utf-8">
<style type="text/css">
*{ margin:0;padding:0;}
.outdiv{ width:400px;height:120px;border:1px solid silver;position:relative;margin:50px auto;}
.outdiv input{ width:200px;height:30px;margin:20px 100px;font-size:30px;}
.outdiv p{ width:100%;height:30px;background:#f1f1f1;text-align:center;line-height:30px;margin:0 auto;text-align:center;font-size:12px;}
</style>
<script type="text/javascript">
window.onload=function(){
	var data=(function(){
		var arr2=['角','分','块',"十","百","千","万","亿"];
		var obj = {
		    "0": "零",
		    "1": "壹",
		    "2": "贰",
		    "3": "叁",
		    "4": "肆",
		    "5": "伍",
		    "6": "陆",
		    "7": "柒",
		    "8": "捌",
		    "9": "玖",
		};
		var obj2 = {
		    "1": "元",
		    "2": "拾",
		    "3": "佰",
		    "4": "仟",
		    "5": "万",
		    "6": "拾",
		    "7": "佰",
		    "8": "仟"
		}
		var str = '30010001';

		var arr = str.split('');
		var len = arr.length;

		// 只有5位时候，为 --- 万千百十块
		var newStr = '';
		var n = 0;
		//var re = /0+([^0]+)$|(0+)$/;
		var re = /0/g;

		/*str = str.replace(re,function ($0,$1){
			if($1){
				return '-'.repeat($0.length-$1.length)+$1
			}
			return '-'.repeat($0.length)
		});*/
		str = str.replace(re,function ($0){
			return '-';
		});
		console.log(str);
		var index = str.length - str.indexOf('-');
		newStr = str.replace(/\d/g,function ($0,index,input){
			return obj[$0]+obj2[len-index];
		});

		newStr = newStr.replace(/-+/g,function ($0,$1,input){
			console.log($1);
			if($1<index && index >=5 && input.length < 6 ){
				return "零"
			}else if($1<index && index >=5 && input.length >=6){
				return '万'+"零";
			}else{
				return '元'
			}
		});
		console.log(newStr);

		/*newStr = newStr[0]+(newStr.length >= 6 ? "万" : '')+"元整";
		console.log(newStr);*/

	})();/*

	var oinp=document.getElementsByTagName("input")[0];
	var op=document.getElementsByTagName("p")[0];
	oinp.onchange=function(){
		op.innerHTML=data.set(this.value);
	}*/
}
</script>
</head>
<body>
<div class="outdiv">
	<input type="text">
	<p class="first">人民币零元</p>
</div>
</body>
</html>