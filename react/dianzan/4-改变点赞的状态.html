<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script>
		
	</script>
</head>
<body>
	<div class="warp"></div>
	<div class="warp2"></div>
	<script>
	// 写一个类，来复用html结构，同时绑定事件处理
	// 
	// 给结构包一层生成的DOM元素
	// 
		function createDOMFromString (html) {
			let el = document.createElement('div');
			el.innerHTML = html;
			return el;
		}
		// 由于数据状态改变会导致需要我们去更新页面的内容
		/*
		
		一个组件的显示形态由多个状态决定的情况非常常见。代码中混杂着对 DOM 的操作其实是一种不好的实践，手动管理数据和 DOM 之间的关系会导致代码可维护性变差、容易出错。所以我们的例子这里还有优化的空间：如何尽量减少这种手动 DOM 操作？

		 */

		class LikeBtn {
			constructor(){
				this.state = {
					isLiked: false
				}
			}
			changeLikeText () {
				const likeText = this.el.querySelector('.like-text');
				this.state.isLiked = !this.state.isLiked;
				likeText.innerHTML = this.state.isLiked ? '取消' : '点赞';
			}
			render () {
				this.el = createDOMFromString(
					`
						<button class="like-btn"> 
							<span class="like-text">点赞</span>
							<span>👍</span>	
						</button>
					`
				)
				this.el.addEventListener('click' , this.changeLikeText.bind(this))
				return this.el;
			}
		}

		const wrap = document.querySelector('.warp')

		wrap.appendChild(new LikeBtn().render());

		const wrap2 = document.querySelector('.warp2')

		wrap2.appendChild(new LikeBtn().render());

	</script>
</body>
</html>