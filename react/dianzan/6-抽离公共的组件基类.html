<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<script>
		
	</script>
</head>
<body>
	<div class="warp"></div>
	<div class="warp2"></div>
	<script>
		function createDOMFromString (html) {
			let el = document.createElement('div');
			el.innerHTML = html;
			return el;
		}

		class Component {
			constructor(props = {}){
				this.props =  props;
			}
			setSate(obj){
				// åªè¦è°ƒç”¨ setStateï¼Œç»„ä»¶å°±ä¼šé‡æ–°æ¸²æŸ“
				let oldEl = this.el;
				this.state = obj;

				this.el = this._renderDom();

				// é‡æ–°æ›´æ–°åˆ°é¡µé¢ä¸­
				if (this.onStateChange) this.onStateChange(oldEl, this.el)
			}
			_renderDom () {
				this.el = createDOMFromString(this.render())
				this.el.addEventListener('click' , this.changeLikeText.bind(this))
				return this.el;
			}
		}


		class LikeBtn extends Component{
			constructor(props){
				super(props);
				this.state = {
					isLiked: false,
					color:  this.props.color
				}
			}
			changeLikeText () {
				
				this.setSate({
					isLiked: !this.state.isLiked,
					color: 'blue'
				})
			}
			render () {
				return `
						<button class="like-btn" style='background:${this.state.color}'> 
							<span class="like-text">${this.state.isLiked ? 'å–æ¶ˆ' : 'ç‚¹èµ'}</span>
							<span>ğŸ‘</span>	
						</button>
					`
			}
		}

		function ReactRenderDOM (com, contairn){


			wrap.appendChild(com._renderDom());

			com.onStateChange = function (oldEl, newEl) {
				wrap.insertBefore(newEl, oldEl) // æ’å…¥æ–°çš„å…ƒç´ 
	  			wrap.removeChild(oldEl) // åˆ é™¤æ—§çš„å…ƒç´ 
			}
		}

		const wrap = document.querySelector('.warp');

		let dianzan1 = new LikeBtn({color:'red'});

		ReactRenderDOM(dianzan1, wrap)


	</script>
</body>
</html>